import{n as e}from"./rolldown-runtime-DF2fYuay.js";import{a as t,i as n,n as r,r as i,t as a}from"./react-vendor-30L5sGPY.js";import{i as o,o as s}from"./mobx-vendor-CLK5aiQz.js";import{t as c}from"./utils-vendor-C7obVvLN.js";import{a as l,i as u,n as d,o as f,r as ee,s as p,t as m}from"./firebase-vendor-pVIMEAjL.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const h={user:{canViewStudents:!0,canViewAttendance:!0,canViewGrades:!0,canEditAttendance:!1,canEditGrades:!1,canManageStudents:!1,canManageGroups:!1,canManageSubjects:!1,canAccessAdmin:!1},teacher:{canViewStudents:!0,canViewAttendance:!0,canViewGrades:!0,canEditAttendance:!0,canEditGrades:!0,canManageStudents:!1,canManageGroups:!1,canManageSubjects:!1,canAccessAdmin:!1},admin:{canViewStudents:!0,canViewAttendance:!0,canViewGrades:!0,canEditAttendance:!0,canEditGrades:!0,canManageStudents:!0,canManageGroups:!0,canManageSubjects:!0,canAccessAdmin:!0}},g=e=>{let t=`${e.lastName} ${e.firstName.charAt(0)}.`;return e.middleName&&(t+=`${e.middleName.charAt(0)}.`),t},_={present:`Присутствует`,absent:`Отсутствует`,late:`Опоздание`,excused:`Уважительная причина`},v={present:`success`,absent:`error`,late:`warning`,excused:`info`},te={current:`Текущая`,control:`Контрольная`,exam:`Экзамен`,coursework:`Курсовая`},y={home:{id:`home`,title:`Главная`,icon:`home`,requiresAuth:!1,showInNav:!0},students:{id:`students`,title:`Студенты`,icon:`users`,requiresAuth:!1,showInNav:!0},attendance:{id:`attendance`,title:`Посещаемость`,icon:`calendar-check`,requiresAuth:!1,showInNav:!0},grades:{id:`grades`,title:`Успеваемость`,icon:`chart-bar`,requiresAuth:!1,showInNav:!0},admin:{id:`admin`,title:`Администрирование`,icon:`settings`,requiresAuth:!0,requiredRole:`admin`,showInNav:!0},"admin-students":{id:`admin-students`,title:`Управление студентами`,icon:`user-plus`,requiresAuth:!0,requiredRole:`admin`,showInNav:!1,parentId:`admin`},"admin-groups":{id:`admin-groups`,title:`Управление группами`,icon:`folder-plus`,requiresAuth:!0,requiredRole:`admin`,showInNav:!1,parentId:`admin`},"admin-subjects":{id:`admin-subjects`,title:`Управление предметами`,icon:`book-open`,requiresAuth:!0,requiredRole:`admin`,showInNav:!1,parentId:`admin`}};var b=i(),x=e(t(),1),S=`college_schedule_auth`,C=`college_schedule_session_expiry`,w=1440*60*1e3,T={teacher:`teacher2026`,admin:`admin2026`};const E=new class{_user={role:`user`};loginModalOpen=!1;loginError=null;isLoading=!1;constructor(){o(this,{},{autoBind:!0}),this.loadAuthState()}get user(){return this._user}get isAuthenticated(){return this._user.role!==`user`}get isTeacher(){return this._user.role===`teacher`||this._user.role===`admin`}get isAdmin(){return this._user.role===`admin`}get permissions(){return h[this._user.role]}get currentRole(){return this._user.role}canViewStudents=()=>this.permissions.canViewStudents;canViewAttendance=()=>this.permissions.canViewAttendance;canViewGrades=()=>this.permissions.canViewGrades;canEditAttendance=()=>this.permissions.canEditAttendance;canEditGrades=()=>this.permissions.canEditGrades;canManageStudents=()=>this.permissions.canManageStudents;canManageGroups=()=>this.permissions.canManageGroups;canManageSubjects=()=>this.permissions.canManageSubjects;canAccessAdmin=()=>this.permissions.canAccessAdmin;hasRole=e=>{let t={user:0,teacher:1,admin:2};return t[this._user.role]>=t[e]};loadAuthState=()=>{try{let e=localStorage.getItem(S),t=localStorage.getItem(C);if(e&&t){let n=JSON.parse(e),r=parseInt(t,10);Date.now()<r&&n.role!==`user`?this._user={role:n.role}:this.clearAuthStorage()}}catch(e){console.error(`Failed to load auth state:`,e),this.clearAuthStorage()}};saveAuthState=()=>{try{if(this._user.role!==`user`){let e={role:this._user.role,expiry:Date.now()+w};localStorage.setItem(S,JSON.stringify(e)),localStorage.setItem(C,String(e.expiry))}else this.clearAuthStorage()}catch(e){console.error(`Failed to save auth state:`,e)}};clearAuthStorage=()=>{try{localStorage.removeItem(S),localStorage.removeItem(C)}catch(e){console.error(`Failed to clear auth storage:`,e)}};openLoginModal=()=>{this.loginModalOpen=!0,this.loginError=null};closeLoginModal=()=>{this.loginModalOpen=!1,this.loginError=null,this.isLoading=!1};login=async(e,t)=>{this.isLoading=!0,this.loginError=null;try{return await new Promise(e=>setTimeout(e,500)),T[e]===t?(this._user={role:e},this.saveAuthState(),this.closeLoginModal(),!0):(this.loginError=`Неверный пароль`,!1)}catch(e){return this.loginError=`Ошибка авторизации`,console.error(`Login error:`,e),!1}finally{this.isLoading=!1}};logout=()=>{this._user={role:`user`},this.clearAuthStorage(),this.loginError=null};clearError=()=>{this.loginError=null}},D=new class{currentPage=`home`;previousPage=null;sidebarOpen=!0;mobileMenuOpen=!1;constructor(){o(this,{},{autoBind:!0}),this.loadNavigationState()}get currentPageConfig(){return y[this.currentPage]}get pageTitle(){return this.currentPageConfig.title}get breadcrumbs(){let e=[],t=this.currentPageConfig;for(;t&&(e.unshift(t),t.parentId);)t=y[t.parentId];return e}get navigationItems(){return Object.values(y).filter(e=>e.showInNav?e.requiredRole?E.hasRole(e.requiredRole):!0:!1)}canAccessPage=e=>{let t=y[e];return t.requiresAuth?E.isAuthenticated?t.requiredRole?E.hasRole(t.requiredRole):!0:!1:!0};navigate=e=>{if(!this.canAccessPage(e)){y[e].requiresAuth&&!E.isAuthenticated&&E.openLoginModal();return}this.previousPage=this.currentPage,this.currentPage=e,this.mobileMenuOpen=!1,this.saveNavigationState()};goBack=()=>{this.previousPage&&this.canAccessPage(this.previousPage)?(this.currentPage=this.previousPage,this.previousPage=null):this.navigate(`home`)};toggleSidebar=()=>{this.sidebarOpen=!this.sidebarOpen};toggleMobileMenu=()=>{this.mobileMenuOpen=!this.mobileMenuOpen};closeMobileMenu=()=>{this.mobileMenuOpen=!1};openSidebar=()=>{this.sidebarOpen=!0};closeSidebar=()=>{this.sidebarOpen=!1};isPageActive=e=>this.currentPage===e;loadNavigationState=()=>{try{let e=sessionStorage.getItem(`current_page`);if(e&&y[e]){let t=e;this.canAccessPage(t)&&(this.currentPage=t)}let t=localStorage.getItem(`sidebar_open`);t!==null&&(this.sidebarOpen=t===`true`)}catch(e){console.error(`Failed to load navigation state:`,e)}};saveNavigationState=()=>{try{sessionStorage.setItem(`current_page`,this.currentPage),localStorage.setItem(`sidebar_open`,String(this.sidebarOpen))}catch(e){console.error(`Failed to save navigation state:`,e)}}},O=d(p({apiKey:`AIzaSyAxsxafS6H0YNR632AJIF13XVdXETHMKo0`,authDomain:`college-diplomas.firebaseapp.com`,databaseURL:`https://college-diplomas-default-rtdb.firebaseio.com`,projectId:`college-diplomas`,storageBucket:`college-diplomas.firebasestorage.app`,messagingSenderId:`181367907290`,appId:`1:181367907290:web:7cf85370be4c3194d9d6e3`}));var k=`13-class-schedule-nikita`,A=class{static async getData(e){let t=u(O,`${k}/${e}`);return new Promise(e=>{ee(t,t=>{e(t.val())},{onlyOnce:!0})})}static async setData(e,t){await l(u(O,`${k}/${e}`),t)}static async updateData(e,t){await f(u(O,`${k}/${e}`),t)}static async getSnapshot(e){return(await m(u(O,`${k}/${e}`))).val()}};const j=new class{students=[];groups=[];subjects=[];attendanceRecords=[];grades=[];studentsLoading=!1;groupsLoading=!1;subjectsLoading=!1;attendanceLoading=!1;gradesLoading=!1;error=null;filters={};selectedGroupId=null;selectedSubjectId=null;selectedDate=new Date().toISOString().split(`T`)[0];constructor(){o(this,{},{autoBind:!0})}get filteredStudents(){let e=this.students.filter(e=>e.isActive);if(this.filters.groupId&&(e=e.filter(e=>e.groupId===this.filters.groupId)),this.filters.search){let t=this.filters.search.toLowerCase().trim().split(/\s+/).filter(e=>e.length>0);t.length>0&&(e=e.filter(e=>{let n=[e.firstName.toLowerCase(),e.lastName.toLowerCase(),e.middleName?.toLowerCase()].filter(Boolean).join(` `);return t.every(e=>n.includes(e))}))}return e.sort((e,t)=>e.lastName.localeCompare(t.lastName,`ru`))}get activeGroups(){return this.groups.filter(e=>e.isActive).sort((e,t)=>e.name.localeCompare(t.name,`ru`))}get activeSubjects(){return this.subjects.filter(e=>e.isActive).sort((e,t)=>e.name.localeCompare(t.name,`ru`))}get studentsByGroup(){let e={};for(let t of this.filteredStudents)e[t.groupId]||(e[t.groupId]=[]),e[t.groupId].push(t);return e}getGroupById=e=>this.groups.find(t=>t.id===e);getSubjectById=e=>this.subjects.find(t=>t.id===e);getStudentById=e=>this.students.find(t=>t.id===e);getAttendanceForStudent=(e,t)=>this.attendanceRecords.filter(n=>n.studentId===e&&(!t||n.date===t));getGradesForStudent=e=>this.grades.filter(t=>t.studentId===e);loadAllData=async()=>{await Promise.all([this.loadGroups(),this.loadSubjects(),this.loadStudents(),this.loadAttendance(),this.loadGrades()])};loadStudents=async()=>{this.studentsLoading=!0,this.error=null;try{let e=await A.getData(`students`);s(()=>{this.students=e?Object.values(e):[],this.studentsLoading=!1})}catch(e){s(()=>{this.error=`Ошибка загрузки студентов`,this.studentsLoading=!1,console.error(`Load students error:`,e)})}};loadGroups=async()=>{this.groupsLoading=!0;try{let e=await A.getData(`groups`);s(()=>{this.groups=e?Object.values(e):[],this.groupsLoading=!1})}catch(e){s(()=>{this.error=`Ошибка загрузки групп`,this.groupsLoading=!1,console.error(`Load groups error:`,e)})}};loadSubjects=async()=>{this.subjectsLoading=!0;try{let e=await A.getData(`subjects`);s(()=>{this.subjects=e?Object.values(e):[],this.subjectsLoading=!1})}catch(e){s(()=>{this.error=`Ошибка загрузки предметов`,this.subjectsLoading=!1,console.error(`Load subjects error:`,e)})}};loadAttendance=async()=>{this.attendanceLoading=!0;try{let e=await A.getData(`attendance`);s(()=>{this.attendanceRecords=e?Object.values(e):[],this.attendanceLoading=!1})}catch(e){s(()=>{this.error=`Ошибка загрузки посещаемости`,this.attendanceLoading=!1,console.error(`Load attendance error:`,e)})}};loadGrades=async()=>{this.gradesLoading=!0;try{let e=await A.getData(`grades`);s(()=>{this.grades=e?Object.values(e):[],this.gradesLoading=!1})}catch(e){s(()=>{this.error=`Ошибка загрузки оценок`,this.gradesLoading=!1,console.error(`Load grades error:`,e)})}};createStudent=async e=>{if(!E.canManageStudents())return null;let t=new Date().toISOString(),n={id:c(),...e,middleName:e.middleName||void 0,enrollmentDate:e.enrollmentDate||t.split(`T`)[0],isActive:!0,createdAt:t,updatedAt:t};try{return await A.setData(`students/${n.id}`,n),s(()=>{this.students.push(n)}),n}catch(e){return console.error(`Create student error:`,e),null}};updateStudent=async(e,t)=>{if(!E.canManageStudents())return!1;let n=this.students.findIndex(t=>t.id===e);if(n===-1)return!1;let r={...this.students[n],...t,updatedAt:new Date().toISOString()};try{return await A.setData(`students/${e}`,r),s(()=>{this.students[n]=r}),!0}catch(e){return console.error(`Update student error:`,e),!1}};deleteStudent=async e=>E.canManageStudents()?this.updateStudent(e,{}).then(()=>{let t=this.students.findIndex(t=>t.id===e);return t!==-1&&(this.students[t].isActive=!1),!0}):!1;createGroup=async e=>{if(!E.canManageGroups())return null;let t=new Date().toISOString(),n={id:c(),...e,isActive:!0,createdAt:t,updatedAt:t};try{return await A.setData(`groups/${n.id}`,n),s(()=>{this.groups.push(n)}),n}catch(e){return console.error(`Create group error:`,e),null}};updateGroup=async(e,t)=>{if(!E.canManageGroups())return!1;let n=this.groups.findIndex(t=>t.id===e);if(n===-1)return!1;let r={...this.groups[n],...t,updatedAt:new Date().toISOString()};try{return await A.setData(`groups/${e}`,r),s(()=>{this.groups[n]=r}),!0}catch(e){return console.error(`Update group error:`,e),!1}};deleteGroup=async e=>{if(!E.canManageGroups())return!1;let t=this.groups.findIndex(t=>t.id===e);if(t===-1)return!1;try{return await A.updateData(`groups/${e}`,{isActive:!1}),s(()=>{this.groups[t].isActive=!1}),!0}catch(e){return console.error(`Delete group error:`,e),!1}};createSubject=async e=>{if(!E.canManageSubjects())return null;let t=new Date().toISOString(),n={id:c(),...e,isActive:!0,createdAt:t,updatedAt:t};try{return await A.setData(`subjects/${n.id}`,n),s(()=>{this.subjects.push(n)}),n}catch(e){return console.error(`Create subject error:`,e),null}};updateSubject=async(e,t)=>{if(!E.canManageSubjects())return!1;let n=this.subjects.findIndex(t=>t.id===e);if(n===-1)return!1;let r={...this.subjects[n],...t,updatedAt:new Date().toISOString()};try{return await A.setData(`subjects/${e}`,r),s(()=>{this.subjects[n]=r}),!0}catch(e){return console.error(`Update subject error:`,e),!1}};deleteSubject=async e=>{if(!E.canManageSubjects())return!1;let t=this.subjects.findIndex(t=>t.id===e);if(t===-1)return!1;try{return await A.updateData(`subjects/${e}`,{isActive:!1}),s(()=>{this.subjects[t].isActive=!1}),!0}catch(e){return console.error(`Delete subject error:`,e),!1}};createAttendanceRecord=async e=>{if(!E.canEditAttendance())return null;let t=this.getStudentById(e.studentId);if(!t)return null;let n=new Date().toISOString(),r={id:c(),studentId:e.studentId,subjectId:e.subjectId,date:e.date,status:e.status,groupId:t.groupId,note:e.note||``,createdAt:n,updatedAt:n,createdBy:E.currentRole};try{return await A.setData(`attendance/${r.id}`,r),s(()=>{this.attendanceRecords.push(r)}),r}catch(e){return console.error(`Create attendance error:`,e),null}};updateAttendanceRecord=async(e,t)=>{if(!E.canEditAttendance())return!1;let n=this.attendanceRecords.findIndex(t=>t.id===e);if(n===-1)return!1;let r={...this.attendanceRecords[n],...t,note:t.note===void 0?this.attendanceRecords[n].note||``:t.note||``,updatedAt:new Date().toISOString()};try{return await A.setData(`attendance/${e}`,r),s(()=>{this.attendanceRecords[n]=r}),!0}catch(e){return console.error(`Update attendance error:`,e),!1}};createGrade=async e=>{if(!E.canEditGrades())return null;let t=this.getStudentById(e.studentId);if(!t)return null;let n=new Date().toISOString(),r={id:c(),studentId:e.studentId,subjectId:e.subjectId,value:e.value,maxValue:e.maxValue||5,type:e.type,date:e.date,groupId:t.groupId,description:e.description||``,createdAt:n,updatedAt:n,createdBy:E.currentRole};try{return await A.setData(`grades/${r.id}`,r),s(()=>{this.grades.push(r)}),r}catch(e){return console.error(`Create grade error:`,e),null}};updateGrade=async(e,t)=>{if(!E.canEditGrades())return!1;let n=this.grades.findIndex(t=>t.id===e);if(n===-1)return!1;let r={...this.grades[n],...t,description:t.description===void 0?this.grades[n].description||``:t.description||``,updatedAt:new Date().toISOString()};try{return await A.setData(`grades/${e}`,r),s(()=>{this.grades[n]=r}),!0}catch(e){return console.error(`Update grade error:`,e),!1}};setFilter=(e,t)=>{this.filters={...this.filters,[e]:t}};clearFilters=()=>{this.filters={}};setSelectedGroup=e=>{this.selectedGroupId=e,this.filters.groupId=e||void 0};setSelectedSubject=e=>{this.selectedSubjectId=e,this.filters.subjectId=e||void 0};setSelectedDate=e=>{this.selectedDate=e};clearError=()=>{this.error=null}};var ne=4e3;const M=new class{toasts=[];confirmModalState={isOpen:!1,mode:`view`};isDarkMode=!1;globalLoading=!1;loadingMessage=``;constructor(){o(this,{},{autoBind:!0}),this.loadThemePreference()}showToast=(e,t,n)=>{let r=c(),i={id:r,type:e,message:t,duration:n||ne};return this.toasts.push(i),i.duration&&i.duration>0&&setTimeout(()=>{this.removeToast(r)},i.duration),r};showSuccess=e=>this.showToast(`success`,e);showError=e=>this.showToast(`error`,e);showWarning=e=>this.showToast(`warning`,e);showInfo=e=>this.showToast(`info`,e);removeToast=e=>{this.toasts=this.toasts.filter(t=>t.id!==e)};clearAllToasts=()=>{this.toasts=[]};showConfirm=(e,t,n,r)=>{this.confirmModalState={isOpen:!0,mode:`delete`,title:e,message:t,onConfirm:n,onCancel:r}};confirmAction=()=>{this.confirmModalState.onConfirm&&this.confirmModalState.onConfirm(),this.closeConfirm()};cancelAction=()=>{this.confirmModalState.onCancel&&this.confirmModalState.onCancel(),this.closeConfirm()};closeConfirm=()=>{this.confirmModalState={isOpen:!1,mode:`view`}};showLoading=(e=`Загрузка...`)=>{this.globalLoading=!0,this.loadingMessage=e};hideLoading=()=>{this.globalLoading=!1,this.loadingMessage=``};toggleTheme=()=>{this.isDarkMode=!this.isDarkMode,this.saveThemePreference(),this.applyTheme()};setDarkMode=e=>{this.isDarkMode=e,this.saveThemePreference(),this.applyTheme()};loadThemePreference=()=>{try{let e=localStorage.getItem(`theme_dark_mode`);e===null?this.isDarkMode=window.matchMedia(`(prefers-color-scheme: dark)`).matches:this.isDarkMode=e===`true`,this.applyTheme()}catch(e){console.error(`Failed to load theme preference:`,e)}};saveThemePreference=()=>{try{localStorage.setItem(`theme_dark_mode`,String(this.isDarkMode))}catch(e){console.error(`Failed to save theme preference:`,e)}};applyTheme=()=>{this.isDarkMode?document.documentElement.classList.add(`dark-theme`):document.documentElement.classList.remove(`dark-theme`)}};var N={button:`_button_1b2ih_49`,primary:`_primary_1b2ih_78`,secondary:`_secondary_1b2ih_91`,ghost:`_ghost_1b2ih_101`,danger:`_danger_1b2ih_110`,success:`_success_1b2ih_119`,sm:`_sm_1b2ih_128`,md:`_md_1b2ih_134`,lg:`_lg_1b2ih_140`,fullWidth:`_fullWidth_1b2ih_146`,loading:`_loading_1b2ih_150`,iconOnly:`_iconOnly_1b2ih_155`,icon:`_icon_1b2ih_155`,text:`_text_1b2ih_176`,spinner:`_spinner_1b2ih_182`,spin:`_spin_1b2ih_182`},P=e(a(),1);const F=({variant:e=`primary`,size:t=`md`,fullWidth:n=!1,loading:r=!1,icon:i,iconPosition:a=`left`,children:o,className:s=``,disabled:c,...l})=>(0,P.jsxs)(`button`,{className:[N.button,N[e],N[t],n?N.fullWidth:``,r?N.loading:``,i&&!o?N.iconOnly:``,s].filter(Boolean).join(` `),disabled:c||r,...l,children:[r&&(0,P.jsx)(`span`,{className:N.spinner}),!r&&i&&a===`left`&&(0,P.jsx)(`span`,{className:N.icon,children:i}),o&&(0,P.jsx)(`span`,{className:N.text,children:o}),!r&&i&&a===`right`&&(0,P.jsx)(`span`,{className:N.icon,children:i})]});var I={wrapper:`_wrapper_n0ie0_49`,fullWidth:`_fullWidth_n0ie0_55`,label:`_label_n0ie0_59`,inputContainer:`_inputContainer_n0ie0_66`,input:`_input_n0ie0_66`,hasLeftIcon:`_hasLeftIcon_n0ie0_99`,hasRightIcon:`_hasRightIcon_n0ie0_103`,leftIcon:`_leftIcon_n0ie0_107`,rightIcon:`_rightIcon_n0ie0_108`,error:`_error_n0ie0_133`,hint:`_hint_n0ie0_138`,hasError:`_hasError_n0ie0_143`};const L=(0,x.forwardRef)(({label:e,error:t,hint:n,leftIcon:r,rightIcon:i,fullWidth:a=!0,className:o=``,id:s,...c},l)=>{let u=(0,x.useId)(),d=s||u,f=[I.wrapper,a?I.fullWidth:``,t?I.hasError:``,o].filter(Boolean).join(` `),ee=[I.input,r?I.hasLeftIcon:``,i?I.hasRightIcon:``].filter(Boolean).join(` `);return(0,P.jsxs)(`div`,{className:f,children:[e&&(0,P.jsx)(`label`,{className:I.label,htmlFor:d,children:e}),(0,P.jsxs)(`div`,{className:I.inputContainer,children:[r&&(0,P.jsx)(`span`,{className:I.leftIcon,children:r}),(0,P.jsx)(`input`,{ref:l,id:d,className:ee,...c}),i&&(0,P.jsx)(`span`,{className:I.rightIcon,children:i})]}),t&&(0,P.jsx)(`span`,{className:I.error,children:t}),n&&!t&&(0,P.jsx)(`span`,{className:I.hint,children:n})]})});L.displayName=`Input`;var R={wrapper:`_wrapper_1wvz7_49`,fullWidth:`_fullWidth_1wvz7_55`,label:`_label_1wvz7_59`,selectContainer:`_selectContainer_1wvz7_66`,select:`_select_1wvz7_66`,arrow:`_arrow_1wvz7_105`,error:`_error_1wvz7_118`,hint:`_hint_1wvz7_123`,hasError:`_hasError_1wvz7_128`};const z=(0,x.forwardRef)(({label:e,error:t,hint:n,options:r,value:i,placeholder:a=`Выберите...`,fullWidth:o=!0,className:s=``,id:c,...l},u)=>{let d=(0,x.useId)(),f=c||d;return(0,P.jsxs)(`div`,{className:[R.wrapper,o?R.fullWidth:``,t?R.hasError:``,s].filter(Boolean).join(` `),children:[e&&(0,P.jsx)(`label`,{className:R.label,htmlFor:f,children:e}),(0,P.jsxs)(`div`,{className:R.selectContainer,children:[(0,P.jsxs)(`select`,{ref:u,id:f,className:R.select,value:i,...l,children:[a&&(0,P.jsx)(`option`,{value:``,disabled:!0,children:a}),r.map(e=>(0,P.jsx)(`option`,{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),(0,P.jsx)(`span`,{className:R.arrow,children:(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,P.jsx)(`path`,{d:`M6 9l6 6 6-6`})})})]}),t&&(0,P.jsx)(`span`,{className:R.error,children:t}),n&&!t&&(0,P.jsx)(`span`,{className:R.hint,children:n})]})});z.displayName=`Select`;var B=n(),V={overlay:`_overlay_1c2r5_49`,fadeIn:`_fadeIn_1c2r5_1`,modal:`_modal_1c2r5_65`,slideUp:`_slideUp_1c2r5_1`,sm:`_sm_1c2r5_79`,md:`_md_1c2r5_83`,lg:`_lg_1c2r5_87`,xl:`_xl_1c2r5_91`,header:`_header_1c2r5_95`,title:`_title_1c2r5_103`,closeButton:`_closeButton_1c2r5_119`,content:`_content_1c2r5_128`,footer:`_footer_1c2r5_149`};const re=({isOpen:e,onClose:t,title:n,children:r,footer:i,size:a=`md`,closeOnOverlay:o=!0,showCloseButton:s=!0})=>{let c=(0,x.useCallback)(e=>{e.key===`Escape`&&t()},[t]);return(0,x.useEffect)(()=>(e&&(document.addEventListener(`keydown`,c),document.body.style.overflow=`hidden`),()=>{document.removeEventListener(`keydown`,c),document.body.style.overflow=``}),[e,c]),e?(0,B.createPortal)((0,P.jsx)(`div`,{className:V.overlay,onClick:o?t:void 0,children:(0,P.jsxs)(`div`,{className:`${V.modal} ${V[a]}`,onClick:e=>e.stopPropagation(),role:`dialog`,"aria-modal":`true`,"aria-labelledby":n?`modal-title`:void 0,children:[(n||s)&&(0,P.jsxs)(`div`,{className:V.header,children:[n&&(0,P.jsx)(`h2`,{id:`modal-title`,className:V.title,children:n}),s&&(0,P.jsx)(F,{variant:`ghost`,size:`sm`,onClick:t,"aria-label":`Закрыть`,className:V.closeButton,children:(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,P.jsx)(`path`,{d:`M18 6L6 18M6 6l12 12`})})})]}),(0,P.jsx)(`div`,{className:V.content,children:r}),i&&(0,P.jsx)(`div`,{className:V.footer,children:i})]})}),document.body):null};var H={card:`_card_1h7aa_49`,default:`_default_1h7aa_59`,outlined:`_outlined_1h7aa_63`,elevated:`_elevated_1h7aa_69`,"padding-none":`_padding-none_1h7aa_74`,content:`_content_1h7aa_74`,"padding-sm":`_padding-sm_1h7aa_78`,"padding-md":`_padding-md_1h7aa_82`,"padding-lg":`_padding-lg_1h7aa_86`,hoverable:`_hoverable_1h7aa_90`,header:`_header_1h7aa_98`,footer:`_footer_1h7aa_110`};const U=({children:e,variant:t=`default`,padding:n=`md`,hoverable:r=!1,header:i,footer:a,className:o=``,...s})=>(0,P.jsxs)(`div`,{className:[H.card,H[t],H[`padding-${n}`],r?H.hoverable:``,o].filter(Boolean).join(` `),...s,children:[i&&(0,P.jsx)(`div`,{className:H.header,children:i}),(0,P.jsx)(`div`,{className:H.content,children:e}),a&&(0,P.jsx)(`div`,{className:H.footer,children:a})]});var W={wrapper:`_wrapper_1bnxm_49`,table:`_table_1bnxm_74`,thead:`_thead_1bnxm_81`,th:`_th_1bnxm_81`,tbody:`_tbody_1bnxm_94`,tr:`_tr_1bnxm_94`,td:`_td_1bnxm_101`,striped:`_striped_1bnxm_107`,hoverable:`_hoverable_1bnxm_111`,compact:`_compact_1bnxm_115`,loading:`_loading_1bnxm_121`,empty:`_empty_1bnxm_122`,spinner:`_spinner_1bnxm_135`,spin:`_spin_1bnxm_135`};const ie=({columns:e,data:t,keyField:n,loading:r=!1,emptyText:i=`Нет данных`,striped:a=!0,hoverable:o=!0,compact:s=!1,onRowClick:c})=>{let l=[W.table,a?W.striped:``,o?W.hoverable:``,s?W.compact:``].filter(Boolean).join(` `),u=(e,t)=>t.split(`.`).reduce((e,t)=>{if(e&&typeof e==`object`)return e[t]},e);return(0,P.jsx)(`div`,{className:W.wrapper,children:(0,P.jsxs)(`table`,{className:l,children:[(0,P.jsx)(`thead`,{className:W.thead,children:(0,P.jsx)(`tr`,{children:e.map(e=>(0,P.jsx)(`th`,{className:W.th,style:{width:e.width,textAlign:e.align||`left`},children:e.title},e.key))})}),(0,P.jsx)(`tbody`,{className:W.tbody,children:r?(0,P.jsx)(`tr`,{children:(0,P.jsxs)(`td`,{colSpan:e.length,className:W.loading,children:[(0,P.jsx)(`span`,{className:W.spinner}),`Загрузка...`]})}):t.length===0?(0,P.jsx)(`tr`,{children:(0,P.jsx)(`td`,{colSpan:e.length,className:W.empty,children:i})}):t.map((t,r)=>(0,P.jsx)(`tr`,{className:W.tr,onClick:()=>c?.(t),style:{cursor:c?`pointer`:void 0},children:e.map(e=>(0,P.jsx)(`td`,{className:W.td,style:{textAlign:e.align||`left`},children:e.render?e.render(u(t,e.key),t,r):String(u(t,e.key)??``)},e.key))},String(t[n])))})]})})};var ae={container:`_container_1et3d_49`,toast:`_toast_1et3d_68`,slideIn:`_slideIn_1et3d_1`,success:`_success_1et3d_81`,icon:`_icon_1et3d_84`,error:`_error_1et3d_88`,warning:`_warning_1et3d_95`,info:`_info_1et3d_102`,message:`_message_1et3d_117`,close:`_close_1et3d_123`},oe=({type:e})=>{switch(e){case`success`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M22 11.08V12a10 10 0 11-5.93-9.14`}),(0,P.jsx)(`polyline`,{points:`22 4 12 14.01 9 11.01`})]});case`error`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,P.jsx)(`line`,{x1:`15`,y1:`9`,x2:`9`,y2:`15`}),(0,P.jsx)(`line`,{x1:`9`,y1:`9`,x2:`15`,y2:`15`})]});case`warning`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z`}),(0,P.jsx)(`line`,{x1:`12`,y1:`9`,x2:`12`,y2:`13`}),(0,P.jsx)(`line`,{x1:`12`,y1:`17`,x2:`12.01`,y2:`17`})]});case`info`:default:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,P.jsx)(`line`,{x1:`12`,y1:`16`,x2:`12`,y2:`12`}),(0,P.jsx)(`line`,{x1:`12`,y1:`8`,x2:`12.01`,y2:`8`})]})}};const se=r(()=>{let{toasts:e,removeToast:t}=M;return e.length===0?null:(0,P.jsx)(`div`,{className:ae.container,children:e.map(e=>(0,P.jsxs)(`div`,{className:`${ae.toast} ${ae[e.type]}`,role:`alert`,children:[(0,P.jsx)(`span`,{className:ae.icon,children:(0,P.jsx)(oe,{type:e.type})}),(0,P.jsx)(`span`,{className:ae.message,children:e.message}),(0,P.jsx)(`button`,{className:ae.close,onClick:()=>t(e.id),"aria-label":`Закрыть`,children:(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,P.jsx)(`path`,{d:`M18 6L6 18M6 6l12 12`})})})]},e.id))})});var ce={badge:`_badge_14dcc_49`,sm:`_sm_14dcc_60`,md:`_md_14dcc_65`,default:`_default_14dcc_70`,success:`_success_14dcc_75`,warning:`_warning_14dcc_80`,error:`_error_14dcc_85`,info:`_info_14dcc_90`};const G=({children:e,variant:t=`default`,size:n=`md`,className:r=``})=>(0,P.jsx)(`span`,{className:[ce.badge,ce[t],ce[n],r].filter(Boolean).join(` `),children:e});var K={header:`_header_1t69s_49`,left:`_left_1t69s_70`,menuButton:`_menuButton_1t69s_77`,logo:`_logo_1t69s_100`,logoIcon:`_logoIcon_1t69s_110`,logoText:`_logoText_1t69s_116`,title:`_title_1t69s_128`,right:`_right_1t69s_143`,userInfo:`_userInfo_1t69s_150`,role:`_role_1t69s_157`,headerButton:`_headerButton_1t69s_170`};const le=r(()=>{let{isAuthenticated:e,currentRole:t,logout:n,openLoginModal:r}=E,{pageTitle:i,toggleMobileMenu:a,mobileMenuOpen:o,navigate:s}=D,c=e=>{switch(e){case`admin`:return`Администратор`;case`teacher`:return`Преподаватель`;default:return`Гость`}};return(0,P.jsxs)(`header`,{className:K.header,children:[(0,P.jsxs)(`div`,{className:K.left,children:[(0,P.jsx)(`button`,{className:K.menuButton,onClick:a,"aria-label":o?`Закрыть меню`:`Открыть меню`,children:(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:o?(0,P.jsx)(`path`,{d:`M18 6L6 18M6 6l12 12`}):(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(`path`,{d:`M3 12h18M3 6h18M3 18h18`})})})}),(0,P.jsxs)(`div`,{className:K.logo,onClick:()=>s(`home`),"aria-label":`Перейти на главную страницу`,children:[(0,P.jsxs)(`svg`,{className:K.logoIcon,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 016.5 17H20`}),(0,P.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z`})]}),(0,P.jsx)(`span`,{className:K.logoText,children:`Журнал колледжа`})]})]}),(0,P.jsx)(`h1`,{className:K.title,children:i}),(0,P.jsx)(`div`,{className:K.right,children:e?(0,P.jsxs)(`div`,{className:K.userInfo,children:[(0,P.jsx)(`span`,{className:K.role,children:c(t)}),(0,P.jsx)(F,{variant:`ghost`,size:`sm`,onClick:n,className:K.headerButton,children:`Выйти`})]}):(0,P.jsx)(F,{variant:`secondary`,size:`sm`,onClick:r,className:K.headerButton,children:`Войти`})})]})});var q={overlay:`_overlay_1ti2k_49`,sidebar:`_sidebar_1ti2k_65`,open:`_open_1ti2k_86`,collapsed:`_collapsed_1ti2k_90`,label:`_label_1ti2k_93`,navItem:`_navItem_1ti2k_97`,footer:`_footer_1ti2k_101`,mobileOpen:`_mobileOpen_1ti2k_106`,nav:`_nav_1ti2k_97`,navList:`_navList_1ti2k_133`,active:`_active_1ti2k_164`,icon:`_icon_1ti2k_168`,copyright:`_copyright_1ti2k_199`,fadeIn:`_fadeIn_1ti2k_1`},ue=({icon:e})=>{switch(e){case`home`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z`}),(0,P.jsx)(`polyline`,{points:`9,22 9,12 15,12 15,22`})]});case`users`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2`}),(0,P.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`}),(0,P.jsx)(`path`,{d:`M23 21v-2a4 4 0 00-3-3.87`}),(0,P.jsx)(`path`,{d:`M16 3.13a4 4 0 010 7.75`})]});case`calendar-check`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`rect`,{x:`3`,y:`4`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,P.jsx)(`line`,{x1:`16`,y1:`2`,x2:`16`,y2:`6`}),(0,P.jsx)(`line`,{x1:`8`,y1:`2`,x2:`8`,y2:`6`}),(0,P.jsx)(`line`,{x1:`3`,y1:`10`,x2:`21`,y2:`10`}),(0,P.jsx)(`path`,{d:`M9 16l2 2 4-4`})]});case`chart-bar`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`line`,{x1:`12`,y1:`20`,x2:`12`,y2:`10`}),(0,P.jsx)(`line`,{x1:`18`,y1:`20`,x2:`18`,y2:`4`}),(0,P.jsx)(`line`,{x1:`6`,y1:`20`,x2:`6`,y2:`16`})]});case`settings`:return(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`}),(0,P.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z`})]});default:return(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`})})}};const de=r(()=>{let{navigationItems:e,currentPage:t,navigate:n,sidebarOpen:r,mobileMenuOpen:i,closeMobileMenu:a}=D,o=e=>{n(e),a()},s=[q.sidebar,r?q.open:q.collapsed,i?q.mobileOpen:``].filter(Boolean).join(` `);return(0,P.jsxs)(P.Fragment,{children:[i&&(0,P.jsx)(`div`,{className:q.overlay,onClick:a,"aria-hidden":`true`}),(0,P.jsxs)(`aside`,{className:s,children:[(0,P.jsx)(`nav`,{className:q.nav,children:(0,P.jsx)(`ul`,{className:q.navList,children:e.map(e=>(0,P.jsx)(`li`,{children:(0,P.jsxs)(`button`,{className:`${q.navItem} ${t===e.id?q.active:``}`,onClick:()=>o(e.id),title:e.title,children:[(0,P.jsx)(`span`,{className:q.icon,children:(0,P.jsx)(ue,{icon:e.icon})}),(0,P.jsx)(`span`,{className:q.label,children:e.title})]})},e.id))})}),(0,P.jsx)(`div`,{className:q.footer,children:(0,P.jsx)(`p`,{className:q.copyright,children:`© 2026`})})]})]})});var fe={layout:`_layout_4zgao_49`,main:`_main_4zgao_54`,sidebarOpen:`_sidebarOpen_4zgao_61`,sidebarCollapsed:`_sidebarCollapsed_4zgao_70`,content:`_content_4zgao_79`};const pe=r(({children:e})=>{let{sidebarOpen:t}=D,n=[fe.main,t?fe.sidebarOpen:fe.sidebarCollapsed].filter(Boolean).join(` `);return(0,P.jsxs)(`div`,{className:fe.layout,children:[(0,P.jsx)(le,{}),(0,P.jsx)(de,{}),(0,P.jsx)(`main`,{className:n,children:(0,P.jsx)(`div`,{className:fe.content,children:e})})]})});var J={form:`_form_h3f8t_49`,roleSelector:`_roleSelector_h3f8t_55`,roleButton:`_roleButton_h3f8t_66`,active:`_active_h3f8t_99`,hint:`_hint_h3f8t_110`};const me=r(()=>{let{loginModalOpen:e,closeLoginModal:t,login:n,loginError:r,isLoading:i}=E,[a,o]=(0,x.useState)(`teacher`),[s,c]=(0,x.useState)(``);return(0,P.jsx)(re,{isOpen:e,onClose:()=>{t(),c(``),o(`teacher`)},title:`Вход в систему`,size:`sm`,children:(0,P.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault(),await n(a,s),E.loginError||c(``)},className:J.form,children:[(0,P.jsxs)(`div`,{className:J.roleSelector,children:[(0,P.jsxs)(`button`,{type:`button`,className:`${J.roleButton} ${a===`teacher`?J.active:``}`,onClick:()=>o(`teacher`),children:[(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2`}),(0,P.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`}),(0,P.jsx)(`path`,{d:`M23 21v-2a4 4 0 00-3-3.87`}),(0,P.jsx)(`path`,{d:`M16 3.13a4 4 0 010 7.75`})]}),(0,P.jsx)(`span`,{children:`Преподаватель`})]}),(0,P.jsxs)(`button`,{type:`button`,className:`${J.roleButton} ${a===`admin`?J.active:``}`,onClick:()=>o(`admin`),children:[(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`}),(0,P.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z`})]}),(0,P.jsx)(`span`,{children:`Администратор`})]})]}),(0,P.jsx)(L,{type:`password`,label:`Пароль`,placeholder:`Введите пароль`,value:s,onChange:e=>c(e.target.value),error:r||void 0,autoFocus:!0}),(0,P.jsx)(F,{type:`submit`,variant:`primary`,fullWidth:!0,loading:i,disabled:!s,children:`Войти`})]})})});var he={message:`_message_ugefs_49`,footer:`_footer_ugefs_56`};const ge=r(()=>{let{confirmModalState:e,confirmAction:t,cancelAction:n}=M;return(0,P.jsx)(re,{isOpen:e.isOpen,onClose:n,title:e.title,size:`sm`,footer:(0,P.jsxs)(`div`,{className:he.footer,children:[(0,P.jsx)(F,{variant:`ghost`,onClick:n,children:`Отмена`}),(0,P.jsx)(F,{variant:`danger`,onClick:t,children:`Удалить`})]}),children:(0,P.jsx)(`p`,{className:he.message,children:e.message})})});var Y={page:`_page_19jgv_49`,welcome:`_welcome_19jgv_55`,welcomeContent:`_welcomeContent_19jgv_75`,welcomeTitle:`_welcomeTitle_19jgv_81`,welcomeText:`_welcomeText_19jgv_93`,welcomeDecor:`_welcomeDecor_19jgv_101`,stats:`_stats_19jgv_116`,statCard:`_statCard_19jgv_132`,primary:`_primary_19jgv_139`,statIcon:`_statIcon_19jgv_142`,success:`_success_19jgv_146`,warning:`_warning_19jgv_153`,info:`_info_19jgv_160`,statContent:`_statContent_19jgv_181`,statValue:`_statValue_19jgv_186`,statTitle:`_statTitle_19jgv_193`,sectionTitle:`_sectionTitle_19jgv_198`,actionCards:`_actionCards_19jgv_214`,actionCard:`_actionCard_19jgv_214`,actionIcon:`_actionIcon_19jgv_239`},_e=({title:e,value:t,icon:n,color:r})=>(0,P.jsxs)(U,{className:`${Y.statCard} ${Y[r]}`,children:[(0,P.jsx)(`div`,{className:Y.statIcon,children:n}),(0,P.jsxs)(`div`,{className:Y.statContent,children:[(0,P.jsx)(`span`,{className:Y.statValue,children:t}),(0,P.jsx)(`span`,{className:Y.statTitle,children:e})]})]});const ve=r(()=>{let{students:e,groups:t,subjects:n,attendanceRecords:r,grades:i,loadAllData:a,studentsLoading:o}=j,{isTeacher:s,isAdmin:c}=E,{navigate:l}=D;(0,x.useEffect)(()=>{a()},[a]);let u=e.filter(e=>e.isActive),d=t.filter(e=>e.isActive),f=n.filter(e=>e.isActive),ee=new Date().toISOString().split(`T`)[0],p=r.filter(e=>e.date===ee),m=p.filter(e=>e.status===`present`||e.status===`late`).length,h=p.length>0?Math.round(m/p.length*100):0,g=i.length>0?(i.reduce((e,t)=>e+t.value,0)/i.length).toFixed(1):`—`;return(0,P.jsxs)(`div`,{className:Y.page,children:[(0,P.jsxs)(`section`,{className:Y.welcome,children:[(0,P.jsxs)(`div`,{className:Y.welcomeContent,children:[(0,P.jsx)(`h1`,{className:Y.welcomeTitle,children:`Добро пожаловать в журнал колледжа`}),(0,P.jsxs)(`p`,{className:Y.welcomeText,children:[`Система учета посещаемости и успеваемости студентов.`,!s&&` Войдите в систему для редактирования данных.`]}),!E.isAuthenticated&&(0,P.jsx)(F,{variant:`primary`,size:`lg`,onClick:()=>E.openLoginModal(),children:`Войти в систему`})]}),(0,P.jsx)(`div`,{className:Y.welcomeDecor,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 200 200`,fill:`none`,children:[(0,P.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,stroke:`currentColor`,strokeWidth:`2`,opacity:`0.2`}),(0,P.jsx)(`circle`,{cx:`100`,cy:`100`,r:`60`,stroke:`currentColor`,strokeWidth:`2`,opacity:`0.3`}),(0,P.jsx)(`circle`,{cx:`100`,cy:`100`,r:`40`,stroke:`currentColor`,strokeWidth:`2`,opacity:`0.4`}),(0,P.jsx)(`path`,{d:`M100 30 L100 170 M30 100 L170 100`,stroke:`currentColor`,strokeWidth:`1`,opacity:`0.2`})]})})]}),(0,P.jsxs)(`section`,{className:Y.stats,children:[(0,P.jsx)(_e,{title:`Студентов`,value:o?`...`:u.length,color:`primary`,icon:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2`}),(0,P.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`}),(0,P.jsx)(`path`,{d:`M23 21v-2a4 4 0 00-3-3.87`}),(0,P.jsx)(`path`,{d:`M16 3.13a4 4 0 010 7.75`})]})}),(0,P.jsx)(_e,{title:`Групп`,value:d.length,color:`info`,icon:(0,P.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,P.jsx)(`path`,{d:`M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z`})})}),(0,P.jsx)(_e,{title:`Предметов`,value:f.length,color:`warning`,icon:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 016.5 17H20`}),(0,P.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z`})]})}),(0,P.jsx)(_e,{title:`Средний балл`,value:g,color:`success`,icon:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`line`,{x1:`12`,y1:`20`,x2:`12`,y2:`10`}),(0,P.jsx)(`line`,{x1:`18`,y1:`20`,x2:`18`,y2:`4`}),(0,P.jsx)(`line`,{x1:`6`,y1:`20`,x2:`6`,y2:`16`})]})})]}),(0,P.jsxs)(`section`,{className:Y.quickActions,children:[(0,P.jsx)(`h2`,{className:Y.sectionTitle,children:`Быстрые действия`}),(0,P.jsxs)(`div`,{className:Y.actionCards,children:[(0,P.jsxs)(U,{className:Y.actionCard,hoverable:!0,onClick:()=>l(`students`),children:[(0,P.jsx)(`div`,{className:Y.actionIcon,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`path`,{d:`M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2`}),(0,P.jsx)(`circle`,{cx:`9`,cy:`7`,r:`4`})]})}),(0,P.jsx)(`h3`,{children:`Список студентов`}),(0,P.jsx)(`p`,{children:`Просмотр и поиск студентов по группам`})]}),(0,P.jsxs)(U,{className:Y.actionCard,hoverable:!0,onClick:()=>l(`attendance`),children:[(0,P.jsx)(`div`,{className:Y.actionIcon,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`rect`,{x:`3`,y:`4`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,P.jsx)(`line`,{x1:`16`,y1:`2`,x2:`16`,y2:`6`}),(0,P.jsx)(`line`,{x1:`8`,y1:`2`,x2:`8`,y2:`6`}),(0,P.jsx)(`line`,{x1:`3`,y1:`10`,x2:`21`,y2:`10`}),(0,P.jsx)(`path`,{d:`M9 16l2 2 4-4`})]})}),(0,P.jsx)(`h3`,{children:`Посещаемость`}),(0,P.jsx)(`p`,{children:`Отметка и просмотр посещаемости`}),h>0&&(0,P.jsxs)(G,{variant:h>=80?`success`:h>=60?`warning`:`error`,children:[h,`% сегодня`]})]}),(0,P.jsxs)(U,{className:Y.actionCard,hoverable:!0,onClick:()=>l(`grades`),children:[(0,P.jsx)(`div`,{className:Y.actionIcon,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`line`,{x1:`12`,y1:`20`,x2:`12`,y2:`10`}),(0,P.jsx)(`line`,{x1:`18`,y1:`20`,x2:`18`,y2:`4`}),(0,P.jsx)(`line`,{x1:`6`,y1:`20`,x2:`6`,y2:`16`})]})}),(0,P.jsx)(`h3`,{children:`Успеваемость`}),(0,P.jsx)(`p`,{children:`Оценки и академическая статистика`})]}),c&&(0,P.jsxs)(U,{className:Y.actionCard,hoverable:!0,onClick:()=>l(`admin`),children:[(0,P.jsx)(`div`,{className:Y.actionIcon,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`}),(0,P.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z`})]})}),(0,P.jsx)(`h3`,{children:`Администрирование`}),(0,P.jsx)(`p`,{children:`Управление данными системы`})]})]})]})]})});var X={page:`_page_uspp5_49`,header:`_header_uspp5_55`,title:`_title_uspp5_59`,subtitle:`_subtitle_uspp5_75`,filters:`_filters_uspp5_81`,filterRow:`_filterRow_uspp5_85`,filterItem:`_filterItem_uspp5_96`};const ye=r(()=>{let{filteredStudents:e,activeGroups:t,loadStudents:n,loadGroups:r,studentsLoading:i,selectedGroupId:a,setSelectedGroup:o,filters:s,setFilter:c,getGroupById:l}=j,[u,d]=(0,x.useState)(s.search||``);(0,x.useEffect)(()=>{n(),r()},[n,r]),(0,x.useEffect)(()=>{let e=setTimeout(()=>{c(`search`,u||void 0)},300);return()=>clearTimeout(e)},[u,c]);let f=[{value:``,label:`Все группы`},...t.map(e=>({value:e.id,label:e.name}))];return(0,P.jsxs)(`div`,{className:X.page,children:[(0,P.jsxs)(`div`,{className:X.header,children:[(0,P.jsx)(`h1`,{className:X.title,children:`Список студентов`}),(0,P.jsxs)(`p`,{className:X.subtitle,children:[`Всего студентов: `,e.length]})]}),(0,P.jsx)(U,{className:X.filters,children:(0,P.jsxs)(`div`,{className:X.filterRow,children:[(0,P.jsx)(`div`,{className:X.filterItem,children:(0,P.jsx)(L,{placeholder:`Поиск по ФИО...`,value:u,onChange:e=>d(e.target.value),leftIcon:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,P.jsx)(`circle`,{cx:`11`,cy:`11`,r:`8`}),(0,P.jsx)(`path`,{d:`M21 21l-4.35-4.35`})]})})}),(0,P.jsx)(`div`,{className:X.filterItem,children:(0,P.jsx)(z,{options:f,value:a||``,onChange:e=>o(e.target.value||null),placeholder:`Выберите группу`})})]})}),(0,P.jsx)(U,{padding:`none`,children:(0,P.jsx)(ie,{columns:[{key:`index`,title:`№`,width:`60px`,render:(e,t,n)=>n+1},{key:`fullName`,title:`ФИО`,render:(e,t)=>g(t)},{key:`groupId`,title:`Группа`,width:`150px`,render:e=>{let t=l(e);return t?t.name:`—`}},{key:`email`,title:`Email`,render:e=>e||`—`},{key:`phone`,title:`Телефон`,width:`150px`,render:e=>e||`—`},{key:`isActive`,title:`Статус`,width:`120px`,align:`center`,render:e=>(0,P.jsx)(G,{variant:e?`success`:`error`,children:e?`Активен`:`Неактивен`})}],data:e,keyField:`id`,loading:i,emptyText:`Студенты не найдены`})})]})});var Z={page:`_page_1hvpy_49`,header:`_header_1hvpy_55`,title:`_title_1hvpy_59`,subtitle:`_subtitle_1hvpy_75`,filters:`_filters_1hvpy_81`,filterRow:`_filterRow_1hvpy_85`,filterItem:`_filterItem_1hvpy_96`,notice:`_notice_1hvpy_106`,attendanceList:`_attendanceList_1hvpy_118`,attendanceRow:`_attendanceRow_1hvpy_123`,index:`_index_1hvpy_137`,name:`_name_1hvpy_144`,status:`_status_1hvpy_150`,loading:`_loading_1hvpy_154`,empty:`_empty_1hvpy_155`,modalContent:`_modalContent_1hvpy_161`,modalFooter:`_modalFooter_1hvpy_167`};const be=r(()=>{let{filteredStudents:e,activeGroups:t,activeSubjects:n,loadStudents:r,loadGroups:i,loadSubjects:a,loadAttendance:o,selectedGroupId:s,selectedSubjectId:c,selectedDate:l,setSelectedGroup:u,setSelectedSubject:d,setSelectedDate:f,getAttendanceForStudent:ee,createAttendanceRecord:p,updateAttendanceRecord:m,studentsLoading:h}=j,{canEditAttendance:te}=E,[y,b]=(0,x.useState)(!1),[S,C]=(0,x.useState)(null),[w,T]=(0,x.useState)(`present`),[D,O]=(0,x.useState)(``);(0,x.useEffect)(()=>{r(),i(),a(),o()},[r,i,a,o]);let k=[{value:``,label:`Все группы`},...t.map(e=>({value:e.id,label:e.name}))],A=[{value:``,label:`Выберите предмет`},...n.map(e=>({value:e.id,label:e.name}))],ne=Object.entries(_).map(([e,t])=>({value:e,label:t})),N=e=>c?ee(e,l).find(e=>e.subjectId===c):null,I=e=>{if(!te()){M.showWarning(`Войдите как преподаватель для отметки посещаемости`);return}if(!c){M.showWarning(`Выберите предмет`);return}C(e);let t=N(e.id);T(t?.status||`present`),O(t?.note||``),b(!0)},R=async()=>{if(!S||!c)return;let e=N(S.id);e?await m(e.id,{status:w,note:D||void 0}):await p({studentId:S.id,subjectId:c,date:l,status:w,note:D||void 0}),M.showSuccess(`Посещаемость сохранена`),b(!1),C(null)},B=e=>({success:`success`,error:`error`,warning:`warning`,info:`info`})[v[e]]||`default`;return(0,P.jsxs)(`div`,{className:Z.page,children:[(0,P.jsxs)(`div`,{className:Z.header,children:[(0,P.jsx)(`h1`,{className:Z.title,children:`Посещаемость`}),(0,P.jsx)(`p`,{className:Z.subtitle,children:`Отметка и просмотр посещаемости студентов`})]}),(0,P.jsx)(U,{className:Z.filters,children:(0,P.jsxs)(`div`,{className:Z.filterRow,children:[(0,P.jsx)(`div`,{className:Z.filterItem,children:(0,P.jsx)(L,{type:`date`,label:`Дата`,value:l,onChange:e=>f(e.target.value)})}),(0,P.jsx)(`div`,{className:Z.filterItem,children:(0,P.jsx)(z,{label:`Группа`,options:k,value:s||``,onChange:e=>u(e.target.value||null)})}),(0,P.jsx)(`div`,{className:Z.filterItem,children:(0,P.jsx)(z,{label:`Предмет`,options:A,value:c||``,onChange:e=>d(e.target.value||null)})})]})}),!c&&(0,P.jsx)(U,{className:Z.notice,children:(0,P.jsx)(`p`,{children:`Выберите предмет для отметки посещаемости`})}),c&&(0,P.jsx)(U,{padding:`none`,children:(0,P.jsx)(`div`,{className:Z.attendanceList,children:h?(0,P.jsx)(`div`,{className:Z.loading,children:`Загрузка...`}):e.length===0?(0,P.jsx)(`div`,{className:Z.empty,children:`Студенты не найдены`}):e.map((e,t)=>{let n=N(e.id);return(0,P.jsxs)(`div`,{className:Z.attendanceRow,children:[(0,P.jsx)(`span`,{className:Z.index,children:t+1}),(0,P.jsx)(`span`,{className:Z.name,children:g(e)}),(0,P.jsx)(`div`,{className:Z.status,children:n?(0,P.jsx)(G,{variant:B(n.status),children:_[n.status]}):(0,P.jsx)(G,{variant:`default`,children:`Не отмечен`})}),te()&&(0,P.jsx)(F,{variant:`ghost`,size:`sm`,onClick:()=>I(e),children:n?`Изменить`:`Отметить`})]},e.id)})})}),(0,P.jsx)(re,{isOpen:y,onClose:()=>b(!1),title:`Отметка посещаемости: ${S?g(S):``}`,size:`sm`,footer:(0,P.jsxs)(`div`,{className:Z.modalFooter,children:[(0,P.jsx)(F,{variant:`ghost`,onClick:()=>b(!1),children:`Отмена`}),(0,P.jsx)(F,{variant:`primary`,onClick:R,children:`Сохранить`})]}),children:(0,P.jsxs)(`div`,{className:Z.modalContent,children:[(0,P.jsx)(z,{label:`Статус`,options:ne,value:w,onChange:e=>T(e.target.value)}),(0,P.jsx)(L,{label:`Примечание`,placeholder:`Необязательно`,value:D,onChange:e=>O(e.target.value)})]})})]})});var Q={page:`_page_1m5ji_49`,header:`_header_1m5ji_55`,title:`_title_1m5ji_59`,subtitle:`_subtitle_1m5ji_75`,filters:`_filters_1m5ji_81`,filterRow:`_filterRow_1m5ji_85`,filterItem:`_filterItem_1m5ji_96`,gradesList:`_gradesList_1m5ji_106`,noGrades:`_noGrades_1m5ji_112`,moreGrades:`_moreGrades_1m5ji_116`,modalContent:`_modalContent_1m5ji_122`,modalSubject:`_modalSubject_1m5ji_128`,gradeInput:`_gradeInput_1m5ji_134`,modalFooter:`_modalFooter_1m5ji_138`};const xe=r(()=>{let{filteredStudents:e,activeGroups:t,activeSubjects:n,loadStudents:r,loadGroups:i,loadSubjects:a,loadGrades:o,selectedGroupId:s,selectedSubjectId:c,setSelectedGroup:l,setSelectedSubject:u,getGradesForStudent:d,createGrade:f,getSubjectById:ee,studentsLoading:p}=j,{canEditGrades:m}=E,[h,_]=(0,x.useState)(!1),[v,y]=(0,x.useState)(null),[b,S]=(0,x.useState)(5),[C,w]=(0,x.useState)(`current`),[T,D]=(0,x.useState)(``);(0,x.useEffect)(()=>{r(),i(),a(),o()},[r,i,a,o]);let O=[{value:``,label:`Все группы`},...t.map(e=>({value:e.id,label:e.name}))],k=[{value:``,label:`Все предметы`},...n.map(e=>({value:e.id,label:e.name}))],A=Object.entries(te).map(([e,t])=>({value:e,label:t})),ne=e=>{let t=d(e);return c&&(t=t.filter(e=>e.subjectId===c)),t},N=e=>e.length===0?`—`:(e.reduce((e,t)=>e+t.value,0)/e.length).toFixed(1),I=e=>{if(!m()){M.showWarning(`Войдите как преподаватель для добавления оценок`);return}if(!c){M.showWarning(`Выберите предмет`);return}y(e),S(5),w(`current`),D(``),_(!0)},R=async()=>{!v||!c||(await f({studentId:v.id,subjectId:c,value:b,type:C,date:new Date().toISOString().split(`T`)[0],description:T||void 0}),M.showSuccess(`Оценка добавлена`),_(!1),y(null))},B=e=>e>=4.5?`success`:e>=3?`warning`:`error`,V=[{key:`index`,title:`№`,width:`50px`,render:(e,t,n)=>n+1},{key:`fullName`,title:`ФИО`,render:(e,t)=>g(t)},{key:`grades`,title:`Оценки`,render:(e,t)=>{let n=ne(t.id);return n.length===0?(0,P.jsx)(`span`,{className:Q.noGrades,children:`—`}):(0,P.jsxs)(`div`,{className:Q.gradesList,children:[n.slice(0,5).map(e=>(0,P.jsx)(G,{variant:B(e.value),size:`sm`,children:e.value},e.id)),n.length>5&&(0,P.jsxs)(`span`,{className:Q.moreGrades,children:[`+`,n.length-5]})]})}},{key:`average`,title:`Средний`,width:`100px`,align:`center`,render:(e,t)=>{let n=N(ne(t.id));return n===`—`?n:(0,P.jsx)(G,{variant:B(parseFloat(n)),children:n})}},...m()&&c?[{key:`actions`,title:``,width:`100px`,render:(e,t)=>(0,P.jsx)(F,{variant:`ghost`,size:`sm`,onClick:()=>I(t),children:`Добавить`})}]:[]];return(0,P.jsxs)(`div`,{className:Q.page,children:[(0,P.jsxs)(`div`,{className:Q.header,children:[(0,P.jsx)(`h1`,{className:Q.title,children:`Успеваемость`}),(0,P.jsx)(`p`,{className:Q.subtitle,children:`Оценки и статистика успеваемости студентов`})]}),(0,P.jsx)(U,{className:Q.filters,children:(0,P.jsxs)(`div`,{className:Q.filterRow,children:[(0,P.jsx)(`div`,{className:Q.filterItem,children:(0,P.jsx)(z,{label:`Группа`,options:O,value:s||``,onChange:e=>l(e.target.value||null)})}),(0,P.jsx)(`div`,{className:Q.filterItem,children:(0,P.jsx)(z,{label:`Предмет`,options:k,value:c||``,onChange:e=>u(e.target.value||null)})})]})}),(0,P.jsx)(U,{padding:`none`,children:(0,P.jsx)(ie,{columns:V,data:e,keyField:`id`,loading:p,emptyText:`Студенты не найдены`})}),(0,P.jsx)(re,{isOpen:h,onClose:()=>_(!1),title:`Добавить оценку: ${v?g(v):``}`,size:`sm`,footer:(0,P.jsxs)(`div`,{className:Q.modalFooter,children:[(0,P.jsx)(F,{variant:`ghost`,onClick:()=>_(!1),children:`Отмена`}),(0,P.jsx)(F,{variant:`primary`,onClick:R,children:`Сохранить`})]}),children:(0,P.jsxs)(`div`,{className:Q.modalContent,children:[(0,P.jsxs)(`p`,{className:Q.modalSubject,children:[`Предмет: `,c?ee(c)?.name:``]}),(0,P.jsx)(`div`,{className:Q.gradeInput,children:(0,P.jsx)(L,{type:`number`,label:`Оценка`,min:1,max:5,value:b,onChange:e=>S(parseInt(e.target.value)||1)})}),(0,P.jsx)(z,{label:`Тип оценки`,options:A,value:C,onChange:e=>w(e.target.value)}),(0,P.jsx)(L,{label:`Описание`,placeholder:`Необязательно`,value:T,onChange:e=>D(e.target.value)})]})})]})});var $={page:`_page_5tms6_49`,header:`_header_5tms6_55`,title:`_title_5tms6_59`,subtitle:`_subtitle_5tms6_75`,tabs:`_tabs_5tms6_81`,tab:`_tab_5tms6_81`,active:`_active_5tms6_106`,toolbar:`_toolbar_5tms6_112`,actions:`_actions_5tms6_116`,form:`_form_5tms6_121`,modalFooter:`_modalFooter_5tms6_127`};const Se=r(()=>{let{students:e,groups:t,subjects:n,activeGroups:r,loadAllData:i,createStudent:a,updateStudent:o,deleteStudent:s,createGroup:c,updateGroup:l,deleteGroup:u,createSubject:d,updateSubject:f,deleteSubject:ee,getGroupById:p,studentsLoading:m,groupsLoading:h,subjectsLoading:g}=j,[_,v]=(0,x.useState)(`students`),[te,y]=(0,x.useState)(!1),[b,S]=(0,x.useState)(`create`),[C,w]=(0,x.useState)(null),[T,E]=(0,x.useState)({firstName:``,lastName:``,middleName:``,groupId:``,email:``,phone:``}),[D,O]=(0,x.useState)({name:``,course:1,specialty:``,year:new Date().getFullYear()}),[k,A]=(0,x.useState)({name:``,shortName:``,teacherName:``,hoursTotal:0});(0,x.useEffect)(()=>{i()},[i]);let ne=()=>{E({firstName:``,lastName:``,middleName:``,groupId:``,email:``,phone:``}),O({name:``,course:1,specialty:``,year:new Date().getFullYear()}),A({name:``,shortName:``,teacherName:``,hoursTotal:0}),w(null)},N=()=>{ne(),S(`create`),y(!0)},I=e=>{if(S(`edit`),w(e.id),_===`students`){let t=e;E({firstName:t.firstName,lastName:t.lastName,middleName:t.middleName||``,groupId:t.groupId,email:t.email||``,phone:t.phone||``})}else if(_===`groups`){let t=e;O({name:t.name,course:t.course,specialty:t.specialty,year:t.year})}else{let t=e;A({name:t.name,shortName:t.shortName,teacherName:t.teacherName||``,hoursTotal:t.hoursTotal})}y(!0)},R=async()=>{try{if(_===`students`){if(!T.firstName||!T.lastName||!T.groupId){M.showError(`Заполните обязательные поля`);return}b===`create`?await a(T):C&&await o(C,T)}else if(_===`groups`){if(!D.name||!D.specialty){M.showError(`Заполните обязательные поля`);return}b===`create`?await c(D):C&&await l(C,D)}else{if(!k.name||!k.shortName){M.showError(`Заполните обязательные поля`);return}b===`create`?await d(k):C&&await f(C,k)}M.showSuccess(b===`create`?`Запись добавлена`:`Запись обновлена`),y(!1),ne()}catch{M.showError(`Ошибка сохранения`)}},B=async e=>{M.showConfirm(`Удаление записи`,`Вы уверены, что хотите удалить эту запись?`,async()=>{_===`students`?await s(e):_===`groups`?await u(e):await ee(e),M.showSuccess(`Запись удалена`)})},V=r.map(e=>({value:e.id,label:e.name}));return(0,P.jsxs)(`div`,{className:$.page,children:[(0,P.jsxs)(`div`,{className:$.header,children:[(0,P.jsx)(`h1`,{className:$.title,children:`Администрирование`}),(0,P.jsx)(`p`,{className:$.subtitle,children:`Управление данными системы`})]}),(0,P.jsxs)(`div`,{className:$.tabs,children:[(0,P.jsx)(`button`,{className:`${$.tab} ${_===`students`?$.active:``}`,onClick:()=>v(`students`),children:`Студенты`}),(0,P.jsx)(`button`,{className:`${$.tab} ${_===`groups`?$.active:``}`,onClick:()=>v(`groups`),children:`Группы`}),(0,P.jsx)(`button`,{className:`${$.tab} ${_===`subjects`?$.active:``}`,onClick:()=>v(`subjects`),children:`Предметы`})]}),(0,P.jsx)(U,{className:$.toolbar,children:(0,P.jsxs)(F,{variant:`primary`,onClick:N,children:[`Добавить `,_===`students`?`студента`:_===`groups`?`группу`:`предмет`]})}),(0,P.jsxs)(U,{padding:`none`,children:[_===`students`&&(0,P.jsx)(ie,{columns:[{key:`lastName`,title:`Фамилия`},{key:`firstName`,title:`Имя`},{key:`middleName`,title:`Отчество`,render:e=>e||`—`},{key:`groupId`,title:`Группа`,render:e=>p(e)?.name||`—`},{key:`actions`,title:``,width:`100px`,render:(e,t)=>(0,P.jsxs)(`div`,{className:$.actions,children:[(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>I(t),"aria-label":`Редактировать`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`path`,{d:`M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7`}),(0,P.jsx)(`path`,{d:`M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z`})]})}),(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>B(t.id),"aria-label":`Удалить`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,P.jsx)(`path`,{d:`M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2`})]})})]})}],data:e.filter(e=>e.isActive),keyField:`id`,loading:m,emptyText:`Нет студентов`}),_===`groups`&&(0,P.jsx)(ie,{columns:[{key:`name`,title:`Название`},{key:`course`,title:`Курс`,width:`80px`},{key:`specialty`,title:`Специальность`},{key:`year`,title:`Год`,width:`80px`},{key:`actions`,title:``,width:`100px`,render:(e,t)=>(0,P.jsxs)(`div`,{className:$.actions,children:[(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>I(t),"aria-label":`Редактировать`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`path`,{d:`M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7`}),(0,P.jsx)(`path`,{d:`M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z`})]})}),(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>B(t.id),"aria-label":`Удалить`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,P.jsx)(`path`,{d:`M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2`})]})})]})}],data:t.filter(e=>e.isActive),keyField:`id`,loading:h,emptyText:`Нет групп`}),_===`subjects`&&(0,P.jsx)(ie,{columns:[{key:`name`,title:`Название`},{key:`shortName`,title:`Сокращение`,width:`120px`},{key:`teacherName`,title:`Преподаватель`,render:e=>e||`—`},{key:`hoursTotal`,title:`Часы`,width:`80px`},{key:`actions`,title:``,width:`100px`,render:(e,t)=>(0,P.jsxs)(`div`,{className:$.actions,children:[(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>I(t),"aria-label":`Редактировать`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`path`,{d:`M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7`}),(0,P.jsx)(`path`,{d:`M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z`})]})}),(0,P.jsx)(F,{size:`sm`,variant:`ghost`,onClick:()=>B(t.id),"aria-label":`Удалить`,children:(0,P.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,P.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,P.jsx)(`path`,{d:`M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2`})]})})]})}],data:n.filter(e=>e.isActive),keyField:`id`,loading:g,emptyText:`Нет предметов`})]}),(0,P.jsx)(re,{isOpen:te,onClose:()=>y(!1),title:(()=>`${b===`create`?`Добавить`:`Редактировать`} ${_===`students`?`студента`:_===`groups`?`группу`:`предмет`}`)(),footer:(0,P.jsxs)(`div`,{className:$.modalFooter,children:[(0,P.jsx)(F,{variant:`ghost`,onClick:()=>y(!1),children:`Отмена`}),(0,P.jsx)(F,{variant:`primary`,onClick:R,children:`Сохранить`})]}),children:(0,P.jsxs)(`div`,{className:$.form,children:[_===`students`&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(L,{label:`Фамилия *`,value:T.lastName,onChange:e=>E({...T,lastName:e.target.value})}),(0,P.jsx)(L,{label:`Имя *`,value:T.firstName,onChange:e=>E({...T,firstName:e.target.value})}),(0,P.jsx)(L,{label:`Отчество`,value:T.middleName,onChange:e=>E({...T,middleName:e.target.value})}),(0,P.jsx)(z,{label:`Группа *`,options:V,value:T.groupId,onChange:e=>E({...T,groupId:e.target.value})}),(0,P.jsx)(L,{label:`Email`,type:`email`,value:T.email,onChange:e=>E({...T,email:e.target.value})}),(0,P.jsx)(L,{label:`Телефон`,value:T.phone,onChange:e=>E({...T,phone:e.target.value})})]}),_===`groups`&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(L,{label:`Название *`,value:D.name,onChange:e=>O({...D,name:e.target.value})}),(0,P.jsx)(L,{label:`Курс *`,type:`number`,min:1,max:6,value:D.course,onChange:e=>O({...D,course:parseInt(e.target.value)||1})}),(0,P.jsx)(L,{label:`Специальность *`,value:D.specialty,onChange:e=>O({...D,specialty:e.target.value})}),(0,P.jsx)(L,{label:`Год поступления *`,type:`number`,value:D.year,onChange:e=>O({...D,year:parseInt(e.target.value)||2024})})]}),_===`subjects`&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(L,{label:`Название *`,value:k.name,onChange:e=>A({...k,name:e.target.value})}),(0,P.jsx)(L,{label:`Сокращение *`,value:k.shortName,onChange:e=>A({...k,shortName:e.target.value})}),(0,P.jsx)(L,{label:`Преподаватель`,value:k.teacherName,onChange:e=>A({...k,teacherName:e.target.value})}),(0,P.jsx)(L,{label:`Часов всего`,type:`number`,value:k.hoursTotal,onChange:e=>A({...k,hoursTotal:parseInt(e.target.value)||0})})]})]})})]})});var Ce=r(()=>{let{currentPage:e}=D;switch(e){case`home`:return(0,P.jsx)(ve,{});case`students`:return(0,P.jsx)(ye,{});case`attendance`:return(0,P.jsx)(be,{});case`grades`:return(0,P.jsx)(xe,{});case`admin`:case`admin-students`:case`admin-groups`:case`admin-subjects`:return(0,P.jsx)(Se,{});default:return(0,P.jsx)(ve,{})}}),we=r(()=>((0,x.useEffect)(()=>{j.loadAllData()},[]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(pe,{children:(0,P.jsx)(Ce,{})}),(0,P.jsx)(me,{}),(0,P.jsx)(ge,{}),(0,P.jsx)(se,{})]})));(0,b.createRoot)(document.getElementById(`root`)).render((0,P.jsx)(x.StrictMode,{children:(0,P.jsx)(we,{})}));